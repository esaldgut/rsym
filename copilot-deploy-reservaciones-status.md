âº Now let me create a final summary document for the environment variables configuration:

âº Write(ENV-CONFIG-SUMMARY.md)
  â¿ Â Wrote 321 lines to ENV-CONFIG-SUMMARY.md
     # ğŸ“¦ Environment Variables Configuration - Summary
     **Fecha**: 2025-10-31
     **Status**: âœ… **IMPLEMENTADO Y LISTO PARA USAR**
     ---
     ## âœ… Lo que se implementÃ³
     ### 1. **Script Automatizado de ConfiguraciÃ³n**
     â€¦ +311 lines (ctrl+o to expand)

âº Perfect! I've completed the environment variables configuration for AWS Copilot. Here's what has been implemented:

  âœ… Configuration Complete

  Files Created/Updated:

  1. scripts/setup-copilot-secrets.sh (NEW - Executable)
    - Automated script to create AWS Secrets Manager secrets
    - Reads values from .env.local automatically
    - Creates/updates 3 secrets: URL_ENCRYPTION_SECRET, MIT_WEBHOOK_SECRET, MIT_API_KEY
    - Full validation and error handling
  2. copilot/nextjs-dev/manifest.yml (UPDATED)
    - Added secrets: section with 3 AWS Secrets Manager references
    - Added public variables (NEXT_PUBLIC_BASE_URL, MIT_ENVIRONMENT, etc.)
    - Environment-specific config for dev and prod
    - Sandbox vs production MIT URLs configured
  3. docs/COPILOT-ENV-SETUP.md (UPDATED)
    - Added Quick Start section at the top
    - Added complete script documentation
    - Added troubleshooting for script execution
  4. docs/iam-secrets-policy.json (NEW)
    - IAM policy reference for secrets access
    - Copilot will automatically attach this to the Task Role
  5. ENV-CONFIG-SUMMARY.md (NEW)
    - Executive summary of entire configuration
    - Quick Start guide
    - Verification checklist
    - Complete troubleshooting guide

  Ready to Execute:

  # 1. Run the setup script (creates secrets in AWS)
  ./scripts/setup-copilot-secrets.sh

  # 2. Verify secrets were created
  aws secretsmanager list-secrets --region us-west-2 --query 'SecretList[?contains(Name, `/copilot/yaan-dev/dev/`)].Name'

  # 3. Deploy with secrets configured
  ./deploy-safe.sh

  What Happens on Deployment:

  When you run ./deploy-safe.sh, Copilot will:
  1. âœ… Read secrets from AWS Secrets Manager
  2. âœ… Inject them as environment variables in the ECS container
  3. âœ… Automatically add IAM permissions to the Task Role
  4. âœ… Make them available as process.env.URL_ENCRYPTION_SECRET, etc.

  Configured Variables:

  Secrets (AWS Secrets Manager):
  - URL_ENCRYPTION_SECRET - FASE 1 (booking URL encryption)
  - MIT_WEBHOOK_SECRET - FASE 6 (webhook HMAC verification)
  - MIT_API_KEY - FASE 6 (MIT Payment Gateway API)

  Public Variables (manifest.yml):
  - NEXT_PUBLIC_BASE_URL - https://yaan.com.mx
  - MIT_ENVIRONMENT - sandbox (dev) / production (prod)
  - MIT_BASE_URL - Different URLs for sandbox vs production
  - NODE_ENV, LOG_LEVEL, etc.

  The configuration is complete and ready to use. The script handles everything automatically - just run it and deploy!

> en quÃ© momento ejecuto yo ./scripts/setup-copilot-secrets.sh

âº Â¡Excelente pregunta! DÃ©jame explicarte cuÃ¡ndo y en quÃ© orden debes ejecutar el script:

  ğŸ“… Momento de EjecuciÃ³n

  Ejecuta el script AHORA (una sola vez)

  # Desde el directorio raÃ­z del proyecto
  ./scripts/setup-copilot-secrets.sh

  Â¿Por quÃ© ahora?
  - Los secretos deben existir en AWS ANTES del prÃ³ximo despliegue
  - Copilot lee los secretos durante el despliegue
  - Si los secretos no existen, el despliegue fallarÃ¡

  ğŸ”„ Flujo Completo (Orden Correcto)

  # PASO 1: Configurar secretos (SOLO UNA VEZ - AHORA)
  ./scripts/setup-copilot-secrets.sh

  # Output esperado:
  # === ConfiguraciÃ³n de Secretos AWS para Copilot ===
  # âœ“ AWS CLI configurado correctamente
  # âœ“ Variables encontradas en .env.local
  # === Creando Secretos en AWS Secrets Manager ===
  # Procesando: /copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET
  #   âœ“ Secreto creado
  # ...

  # PASO 2: Verificar que los secretos fueron creados (OPCIONAL)
  aws secretsmanager list-secrets \
    --region us-west-2 \
    --query 'SecretList[?contains(Name, `/copilot/yaan-dev/dev/`)].Name'

  # PASO 3: Desplegar (CADA VEZ QUE HAGAS CAMBIOS AL CÃ“DIGO)
  ./deploy-safe.sh

  ğŸ¯ Casos de Uso

  1. Primera vez configurando secretos (AHORA)

  # Ejecuta el script por primera vez
  ./scripts/setup-copilot-secrets.sh

  # Luego despliega
  ./deploy-safe.sh

  2. Ya ejecutaste el script antes

  # NO necesitas volver a ejecutarlo
  # Solo despliega directamente
  ./deploy-safe.sh

  3. Necesitas actualizar un secret (cambiÃ³ el MIT_API_KEY, por ejemplo)

  # 1. Actualiza el valor en .env.local
  echo "MIT_API_KEY=nuevo-api-key" >> .env.local

  # 2. Re-ejecuta el script (actualiza el secret existente)
  ./scripts/setup-copilot-secrets.sh

  # 3. Re-despliega para que el contenedor use el nuevo valor
  ./deploy-safe.sh

  4. Desarrollo diario (cambios al cÃ³digo)

  # NO ejecutes el script
  # Solo despliega
  ./deploy-safe.sh

  âš ï¸ CuÃ¡ndo NO ejecutar el script

  NO lo ejecutes cada vez que despliegues - los secretos ya estÃ¡n configurados en AWS y persisten entre despliegues.

  Solo re-ejecuta el script si:
  - âŒ Es la primera vez (configuras secretos por primera vez)
  - âŒ Necesitas actualizar un valor de secret
  - âŒ Agregaste un nuevo secret al manifest.yml

  âœ… Resumen Simple

  | AcciÃ³n              | Frecuencia                         | Comando                            |
  |---------------------|------------------------------------|------------------------------------|
  | Configurar secretos | UNA VEZ (o cuando cambien valores) | ./scripts/setup-copilot-secrets.sh |
  | Desplegar cÃ³digo    | CADA VEZ que hagas cambios         | ./deploy-safe.sh                   |

  ---
  Â¿Entonces quÃ© hago AHORA?

  # 1. Ejecuta el script (primera vez)
  ./scripts/setup-copilot-secrets.sh

  # 2. Verifica que funcionÃ³
  aws secretsmanager list-secrets --region us-west-2 --query 'SecretList[?contains(Name, `/copilot/yaan-dev/dev/`)].Name'

  # 3. Despliega tu aplicaciÃ³n
  ./deploy-safe.sh

  DespuÃ©s de este primer despliegue, solo necesitarÃ¡s ejecutar ./deploy-safe.sh para futuros despliegues. Los secretos ya estarÃ¡n configurados en AWS.

> ContinÃºa

âº ContinuarÃ© completando la configuraciÃ³n ejecutando el script y verificando que todo estÃ© listo para el despliegue.

âº Primero verifico que .env.local tiene los valores necesarios:

âº Bash(grep -E "(URL_ENCRYPTION_SECRET|MIT_WEBHOOK_SECRET|MIT_API_KEY)" /Users/esaldgut/dev/src/react/nextjs/yaan-web/.env.local)
  â¿ Â URL_ENCRYPTION_SECRET=/nmajawaO61zlorZ6PZgdTu8+5S75YtjBySDq235Fac=
     MIT_WEBHOOK_SECRET=test-secret-key-for-local-development
     MIT_API_KEY=test-api-key-for-local

âº Perfecto, los secretos existen en .env.local. Ahora ejecuto el script de configuraciÃ³n:

âº Bash(./scripts/setup-copilot-secrets.sh) timeout: 30s
  â¿ Â === ConfiguraciÃ³n de Secretos AWS para Copilot ===

     âœ“ AWS CLI configurado correctamente
     â€¦ +25 lines (ctrl+o to expand)

âº Excelente! Los secretos fueron creados exitosamente. Ahora verifico que estÃ¡n en AWS:

âº Bash(aws secretsmanager list-secrets --region us-west-2 --query 'SecretList[?contains(Name, `/copilot/yaan-dev/dev/`)].Name' --output json)
  â¿ Â [
         "/copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET",
         "/copilot/yaan-dev/dev/secrets/MIT_WEBHOOK_SECRET",
     â€¦ +2 lines (ctrl+o to expand)

âº Perfecto! Los 3 secretos estÃ¡n creados correctamente en AWS. Ahora actualizo el documento de sesiÃ³n final:

âº Read(SESION-FINAL-2025-10-31.md)
  â¿ Â Read 19 lines

âº Update(SESION-FINAL-2025-10-31.md)
  â¿ Â Updated SESION-FINAL-2025-10-31.md with 82 additions and 2 removals
       432
       433    ---
       434
       435 -  **Ãšltima actualizaciÃ³n**: 2025-10-31 (final del dÃ­a)
       435 +  ## ğŸ” ACTUALIZACIÃ“N: ConfiguraciÃ³n de Variables de Entorno para Copilot
       436 +
       437 +  **Fecha**: 2025-10-31 (continuaciÃ³n)
       438 +  **Status**: âœ… **CONFIGURADO Y VERIFICADO**
       439 +
       440 +  ### âœ… Tareas Completadas
       441 +
       442 +  1. **Script Automatizado de Secretos** âœ…
       443 +     - Creado: `scripts/setup-copilot-secrets.sh`
       444 +     - Ejecutable y probado
       445 +     - Crea/actualiza 3 secretos en AWS Secrets Manager
       446 +     - Lectura automÃ¡tica desde `.env.local`
       447 +
       448 +  2. **Secretos Configurados en AWS** âœ…
       449 +     - `/copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET` âœ…
       450 +     - `/copilot/yaan-dev/dev/secrets/MIT_WEBHOOK_SECRET` âœ…
       451 +     - `/copilot/yaan-dev/dev/secrets/MIT_API_KEY` âœ…
       452 +
       453 +  3. **Copilot Manifest Actualizado** âœ…
       454 +     - Archivo: `copilot/nextjs-dev/manifest.yml`
       455 +     - SecciÃ³n `secrets:` agregada con 3 secretos
       456 +     - Variables pÃºblicas agregadas (NEXT_PUBLIC_BASE_URL, MIT_ENVIRONMENT)
       457 +     - ConfiguraciÃ³n especÃ­fica por entorno (dev/prod)
       458 +
       459 +  4. **DocumentaciÃ³n Completa** âœ…
       460 +     - `docs/COPILOT-ENV-SETUP.md` - GuÃ­a completa actualizada
       461 +     - `docs/iam-secrets-policy.json` - PolÃ­tica IAM de referencia
       462 +     - `ENV-CONFIG-SUMMARY.md` - Resumen ejecutivo con Quick Start
       463 +
       464 +  ### ğŸ“Š Secretos Configurados
       465 +
       466 +  | Secret | Path en AWS | DescripciÃ³n | Usado en |
       467 +  |--------|-------------|-------------|----------|
       468 +  | URL_ENCRYPTION_SECRET | `/copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET` | AES-256-GCM para URLs | FASE 1 |
       469 +  | MIT_WEBHOOK_SECRET | `/copilot/yaan-dev/dev/secrets/MIT_WEBHOOK_SECRET` | HMAC SHA-256 webhooks | FASE 6 |
       470 +  | MIT_API_KEY | `/copilot/yaan-dev/dev/secrets/MIT_API_KEY` | MIT Payment Gateway | FASE 6 |
       471 +
       472 +  ### ğŸš€ PrÃ³ximo Paso: Despliegue
       473 +
       474 +  ```bash
       475 +  # El manifest.yml ya estÃ¡ configurado con los secretos
       476 +  # Los secretos ya estÃ¡n en AWS Secrets Manager
       477 +  # Solo falta desplegar:
       478 +
       479 +  ./deploy-safe.sh
       480 +  ```
       481 +
       482 +  **Durante el despliegue, Copilot automÃ¡ticamente**:
       483 +  1. Lee los secretos de AWS Secrets Manager
       484 +  2. Los inyecta como variables de entorno en el contenedor ECS
       485 +  3. Agrega permisos IAM al Task Role para acceder a los secretos
       486 +  4. Los hace disponibles en `process.env.*` en la aplicaciÃ³n
       487 +
       488 +  ### ğŸ“¦ Archivos Nuevos/Modificados
       489 +
       490 +  | Archivo | AcciÃ³n | Status |
       491 +  |---------|--------|--------|
       492 +  | `scripts/setup-copilot-secrets.sh` | Creado | âœ… Ejecutado |
       493 +  | `copilot/nextjs-dev/manifest.yml` | Actualizado | âœ… Secrets agregados |
       494 +  | `docs/COPILOT-ENV-SETUP.md` | Actualizado | âœ… Quick Start agregado |
       495 +  | `docs/iam-secrets-policy.json` | Creado | âœ… Referencia IAM |
       496 +  | `ENV-CONFIG-SUMMARY.md` | Creado | âœ… Resumen completo |
       497 +
       498 +  ### âœ… VerificaciÃ³n
       499 +
       500 +  ```bash
       501 +  # Secretos verificados en AWS
       502 +  $ aws secretsmanager list-secrets --region us-west-2 --query 'SecretList[?contains(Name, `/copilot/yaan-dev/dev/`)].Name'
       503 +
       504 +  [
       505 +      "/copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET",
       506 +      "/copilot/yaan-dev/dev/secrets/MIT_WEBHOOK_SECRET",
       507 +      "/copilot/yaan-dev/dev/secrets/MIT_API_KEY"
       508 +  ]
       509 +  ```
       510 +
       511 +  **Status**: âœ… **LISTO PARA DESPLIEGUE**
       512 +
       513 +  ---
       514 +
       515 +  **Ãšltima actualizaciÃ³n**: 2025-10-31 (configuraciÃ³n de variables de entorno completada)
       516    **VerificaciÃ³n realizada por**: Claude (Anthropic)
       517 -  **Estado**: âœ… **COMPLETADO Y APROBADO**
       517 +  **Estado**: âœ… **COMPLETADO, CONFIGURADO Y LISTO PARA DESPLIEGUE**

âº âœ… ConfiguraciÃ³n de Variables de Entorno Completada

  He completado exitosamente toda la configuraciÃ³n de variables de entorno para AWS Copilot. AquÃ­ estÃ¡ el resumen:

  ğŸ¯ Lo que se ejecutÃ³:

  1. âœ… Script ejecutado: ./scripts/setup-copilot-secrets.sh
    - LeyÃ³ valores automÃ¡ticamente de .env.local
    - CreÃ³ 3 secretos en AWS Secrets Manager
    - Todos los secretos verificados exitosamente
  2. âœ… Secretos verificados en AWS:
  /copilot/yaan-dev/dev/secrets/URL_ENCRYPTION_SECRET
  /copilot/yaan-dev/dev/secrets/MIT_WEBHOOK_SECRET
  /copilot/yaan-dev/dev/secrets/MIT_API_KEY
  3. âœ… Manifest actualizado: copilot/nextjs-dev/manifest.yml
    - SecciÃ³n secrets: con las 3 referencias
    - Variables pÃºblicas configuradas
    - ConfiguraciÃ³n por entorno (dev/prod)

  ğŸ“ Archivos creados/modificados:

  | Archivo                          | Status               |
  |----------------------------------|----------------------|
  | scripts/setup-copilot-secrets.sh | âœ… Creado y ejecutado |
  | copilot/nextjs-dev/manifest.yml  | âœ… Actualizado        |
  | docs/COPILOT-ENV-SETUP.md        | âœ… Actualizado        |
  | docs/iam-secrets-policy.json     | âœ… Creado             |
  | ENV-CONFIG-SUMMARY.md            | âœ… Creado             |
  | SESION-FINAL-2025-10-31.md       | âœ… Actualizado        |

  ğŸš€ PrÃ³ximo Paso: Despliegue

  Los secretos ya estÃ¡n configurados en AWS. Cuando estÃ©s listo para desplegar:

  ./deploy-safe.sh

  Durante el despliegue, Copilot automÃ¡ticamente:
  - âœ… LeerÃ¡ los secretos de AWS Secrets Manager
  - âœ… Los inyectarÃ¡ como variables de entorno en el contenedor
  - âœ… AgregarÃ¡ permisos IAM al Task Role
  - âœ… Los harÃ¡ disponibles en process.env.*

  La configuraciÃ³n estÃ¡ 100% completa y lista para el despliegue ğŸ‰

> continÃºa con el resto de las fases

âº Entiendo que quieres que continÃºe con el resto de las fases del proyecto. Antes de presentarte un plan, necesito investigar quÃ© fases faltan por
  implementar.

  DÃ©jame investigar el estado actual del proyecto y las fases pendientes:

âº Plan(Investigate pending project phases)
  â¿ Â Done (10 tool uses Â· 81.1k tokens Â· 41.8s)

âº Perfecto, ya tengo toda la informaciÃ³n sobre las fases. Ahora necesito aclarar quÃ© es exactamente lo que quieres que implemente antes de presentar
  un plan.

âºÂ User answered Claude's questions:
  â¿ Â Â· Â¿QuÃ© fases quieres que implemente? Basado en el anÃ¡lisis, hay varias opciones: â†’ FASE 0 (CreaciÃ³n de Reservaciones)

âº Excelente, quieres implementar FASE 0: CreaciÃ³n de Reservaciones. DÃ©jame investigar los detalles necesarios antes de presentar el plan:

âº Plan(Research FASE 0 implementation details)
  â¿ Â Done (18 tool uses Â· 112.0k tokens Â· 2m 8s)

âº Excelente hallazgo! FASE 0 estÃ¡ 90% implementado. Ahora necesito confirmar quÃ© quieres hacer exactamente:

âºÂ User answered Claude's questions:
  â¿ Â Â· SegÃºn la investigaciÃ³n, FASE 0 ya estÃ¡ 90% implementado (booking wizard funcional, GraphQL mutations, server actions, validaciÃ³n). Â¿QuÃ© enfoque
      prefieres? â†’ Completar el 10% faltante (RECOMENDADO)
     Â· Â¿QuÃ© componentes opcionales quieres implementar? â†’ Room Type Selector, Companion Details Form, Real-time Seat Counter, Detalle completo del
     producto getProductByIDAction, reutilizar ProductGalleryHeader funcionando al 100% con FullscreenGallery, reutilizar LocationSelector, previo al
     wizard. Debe de ser atractivo para el cliente viajero|influencer|provide

âº Perfecto! Entiendo que quieres completar el 10% faltante con componentes adicionales importantes. DÃ©jame presentarte el plan detallado:

> ContinÃºa con el anÃ¡lisis profundo y exhaustivo

âº Voy a realizar un anÃ¡lisis profundo y exhaustivo de todos los componentes existentes que necesitamos reutilizar y los que faltan por implementar.
  â¿ Â Initializingâ€¦
  â¿ Â Invalid tool parameters

âº Explore(Deep analysis of reusable components)
  â¿ Â Done (27 tool uses Â· 148.8k tokens Â· 3m 44s)

âº Perfecto! He completado el anÃ¡lisis exhaustivo. Ahora voy a crear el plan de implementaciÃ³n completo para FASE 0.

âº Write(FASE-0-PLAN-IMPLEMENTACION.md)

  Todos
  â˜’ AnÃ¡lisis exhaustivo de componentes existentes reutilizables
  â˜’ Investigar ProductGalleryHeader y FullscreenGallery
  â˜’ Investigar LocationSelector y mapas interactivos
  â˜’ Analizar booking wizard actual y gaps
  â˜ DiseÃ±ar arquitectura completa FASE 0
  â˜ Crear plan de implementaciÃ³n detallado

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Create file
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ FASE-0-PLAN-IMPLEMENTACION.md                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ # ğŸ¯ FASE 0: CreaciÃ³n de Reservaciones - Plan de ImplementaciÃ³n Completo                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Fecha**: 2025-10-31                                                                                                                                                                                                                                       â”‚
â”‚ **Status**: ğŸ“‹ **PLAN DETALLADO - LISTO PARA IMPLEMENTAR**                                                                                                                                                                                                  â”‚
â”‚ **Estimated Time**: 10-16 dÃ­as                                                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ“Š Executive Summary                                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ FASE 0 estÃ¡ **90% implementado**. El booking wizard, server actions, GraphQL mutations, y validaciones ya existen. Este plan se enfoca en:                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 1. **Completar el 10% faltante** (componentes de UI faltantes)                                                                                                                                                                                              â”‚
â”‚ 2. **Mejorar la experiencia de usuario** (pÃ¡gina de detalle atractiva)                                                                                                                                                                                      â”‚
â”‚ 3. **Agregar componentes opcionales** (Room Type Selector, Companion Details, Seat Counter)                                                                                                                                                                 â”‚
â”‚ 4. **Reutilizar componentes existentes** (ProductGalleryHeader, FullscreenGallery, LocationSelector, HybridProductMap)                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ¯ Objetivos                                                                                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Objetivo Principal                                                                                                                                                                                                                                      â”‚
â”‚ Crear una experiencia de reservaciÃ³n **atractiva y completa** desde el marketplace hasta el pago, que supere a la competencia (Exoticca) aprovechando las ventajas Ãºnicas de YAAN:                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ - âœ… Payment plans auto-generados (CONTADO vs PLAZOS)                                                                                                                                                                                                        â”‚
â”‚ - âœ… Secure Pricing System (7 business rules)                                                                                                                                                                                                                â”‚
â”‚ - âœ… Room distribution inteligente                                                                                                                                                                                                                           â”‚
â”‚ - âœ… Change policies flexibles                                                                                                                                                                                                                               â”‚
â”‚ - âœ… GalerÃ­a interactiva con auto-play                                                                                                                                                                                                                       â”‚
â”‚ - âœ… Mapas interactivos con AWS Location Service                                                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Objetivos Secundarios                                                                                                                                                                                                                                   â”‚
â”‚ 1. **100% Reusabilidad**: Usar componentes existentes (ProductGalleryHeader, FullscreenGallery, HybridProductMap, LocationSelector)                                                                                                                         â”‚
â”‚ 2. **Atractivo Visual**: DiseÃ±o superior que enganche al cliente viajero/influencer/provider                                                                                                                                                                â”‚
â”‚ 3. **Mobile-First**: Experiencia optimizada para dispositivos mÃ³viles                                                                                                                                                                                       â”‚
â”‚ 4. **Performance**: Fast loading con Intersection Observer, lazy loading, SSR                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ—ï¸ Arquitectura Completa FASE 0                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Flujo End-to-End                                                                                                                                                                                                                                        â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                    â”‚
â”‚ â”‚ MARKETPLACE (/marketplace)                                           â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  ExperienceCard (grid con productos)                                â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚         â”‚                                                            â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚         â”‚ Click en producto                                          â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚         â–¼                                                            â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  ProductDetailModal (modal existente)                               â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚         â”‚                                                            â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚         â”‚ Click "Reservar ahora"                                     â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚         â–¼                                                            â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  1. encryptProductUrlAction(id, name, type)                         â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  2. requireProfileCompletion() â†’ /settings/profile si incompleto    â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  3. Navigate to /marketplace/booking/[productId]                    â”‚                                                                                                                                                                                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                    â”‚
â”‚                              â”‚                                                                                                                                                                                                                              â”‚
â”‚                              â–¼                                                                                                                                                                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                    â”‚
â”‚ â”‚ PÃGINA DE DETALLE (/marketplace/booking/[productId])                â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚ âœ¨ NUEVO - PÃ¡gina completa ANTES del wizard                         â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ ProductGalleryHeader (100% reusable)                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Auto-play carousel (5s interval)                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Images + videos                                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Fullscreen integration                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - forwardRef pause/resume                                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Product Summary Section                                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Nombre del producto                                     â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Rating (â­â­â­â­â­ 4.8 / 5)                                â”‚     â”‚                                                                                                                                                                                       â”‚
â”‚ â”‚  â”‚  - Precio desde: $5,000 MXN                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Provider avatar + nombre                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ DescripciÃ³n Section                                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - DescripciÃ³n completa del viaje                          â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Preferences tags (ğŸ–ï¸ Playa, ğŸ”ï¸ MontaÃ±a)               â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Languages available (ğŸ‡ªğŸ‡¸ EspaÃ±ol, ğŸ‡ºğŸ‡¸ English)          â”‚     â”‚                                                                                                                                                                                   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Itinerario Section (NEW âœ¨)                                â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚  - ItineraryCard component                                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Day-by-day breakdown                                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Activities por dÃ­a                                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Temporadas y Precios Section (NEW âœ¨)                      â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚  - SeasonCard component (horizontal scroll)               â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚  - Dates (Nov 15 - Dic 15)                                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Nights (8 noches)                                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Category (Alta Temporada)                               â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Base price ($5,000 por persona)                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Availability badge (15 plazas disponibles)              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Alojamiento Section                                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - HotelCard components                                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Hotel names                                             â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - "o similar" disclaimer                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Mapa de Ruta Section (100% reusable)                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - HybridProductMap component                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - CognitoLocationMap (si AWS configurado)                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - ProductMap (fallback decorativo)                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Route calculation + distance                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Waypoint markers                                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ ReseÃ±as Section (opcional)                                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - ProductReviews component                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Empty state si no hay reseÃ±as                           â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ Sticky Footer (CTA)                                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Precio desde: $5,000 MXN                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Button: "Continuar con ReservaciÃ³n" â†’ Wizard           â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                    â”‚
â”‚                              â”‚                                                                                                                                                                                                                              â”‚
â”‚                              â”‚ Click "Continuar con ReservaciÃ³n"                                                                                                                                                                                            â”‚
â”‚                              â–¼                                                                                                                                                                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                    â”‚
â”‚ â”‚ BOOKING WIZARD (/marketplace/booking/wizard?product=[encrypted])    â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚ ğŸ”§ 90% existente - Completar 10% faltante                          â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ WizardProgress (4 steps)                                   â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  [1. Fecha] â†’ [2. Viajeros] â†’ [3. ConfirmaciÃ³n] â†’ [4. âœ…] â”‚     â”‚                                                                                                                                                                                       â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ ProductSummaryCard (sidebar)                               â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - ProductGalleryHeader (mini version)                     â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Producto seleccionado                                   â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Fecha seleccionada                                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Viajeros seleccionados                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  - Precio estimado                                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ STEP 1: SelectDateStep (existente - mejorar)              â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  1. Seleccionar Temporada                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - SeasonCard horizontal scroll                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Show dates, nights, category                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Real-time seat counter âœ¨ NEW                        â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  2. Seleccionar Tipo de HabitaciÃ³n âœ¨ NEW                  â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚     - RoomTypeSelector component                           â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Show room_name, capacity (max_adult, max_minor)      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Show price per room                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Visual cards con iconos                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  3. Seleccionar Fecha EspecÃ­fica                           â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - DatePicker calendar                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Disable dates outside season                         â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Highlight selected date                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  Button: "Continuar" â†’ Step 2                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ STEP 2: TravelersStep (existente - mejorar)               â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  1. NÃºmero de Viajeros                                     â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Adults (1-50) with +/- buttons                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Kids (0-50) with age selector                        â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Babys (0-20) free                                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Dynamic pricing display por categorÃ­a                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Capacity validation (room max_adult + max_minor)     â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  2. InformaciÃ³n de AcompaÃ±antes âœ¨ NEW                     â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚     - CompanionDetailsForm component                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Nombre, apellido, fecha nacimiento                   â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Pasaporte (opcional - internacional)                 â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Lead passenger flag                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Repetir para cada adulto                             â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  3. Servicios Adicionales (opcional) âœ¨ NEW                â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚     - ExtraServicesSelector component                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Mostrar extra_prices[] del producto                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Checkboxes con precios                               â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Tours, seguros, transfers                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  Button: "Continuar" â†’ Step 3                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ STEP 3: ReviewStep (existente)                            â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  1. Resumen Completo                                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Producto + temporada + habitaciÃ³n                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Fecha de viaje                                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Viajeros (desglosado)                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Servicios adicionales (si aplica)                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  2. Seleccionar Tipo de Pago                               â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - PaymentTypeSelector (100% reusable)                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - CONTADO con descuento                                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - PLAZOS con meses sin intereses                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  3. PaymentPlanSummary                                     â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Mostrar plan generado por backend                    â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - CONTADO: cash_final_amount                           â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - PLAZOS: down payment + installments[]                â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  4. PolÃ­ticas y TÃ©rminos                                   â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - PolÃ­tica de cambios                                  â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - PolÃ­tica de cancelaciÃ³n                              â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚     - Checkbox: "Acepto tÃ©rminos y condiciones"            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  Server Actions Flow:                                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚    a. checkAvailabilityAction() âœ… ya implementado         â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚    b. createReservationAction() âœ… ya implementado         â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚    c. generatePaymentPlanAction() âœ… ya implementado       â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  Button: "Confirmar y Pagar" â†’ Step 4                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚                                                                      â”‚                                                                                                                                                                                    â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚ STEP 4: CompletedStep (existente)                         â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚                                                            â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  1. Success Animation                                      â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  2. Resumen de ReservaciÃ³n Creada                          â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  3. initiateMITPaymentAction() âœ… ya implementado          â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚  4. Redirect to MIT Gateway checkout                       â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â”‚  5. Webhook procesa pago (FASE 6 âœ…)                       â”‚     â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚  â”‚  6. Redirect to /traveler/payment-confirmation             â”‚     â”‚                                                                                                                                                                                     â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                                                                                                                                                                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                    â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ“¦ Componentes a Crear (10% Faltante)                                                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 1. **SeasonCard Component** (NUEVO âœ¨)                                                                                                                                                                                                                   â”‚
â”‚ **UbicaciÃ³n**: `src/components/booking/SeasonCard.tsx`                                                                                                                                                                                                      â”‚
â”‚ **Prioridad**: ALTA                                                                                                                                                                                                                                         â”‚
â”‚ **Estimated Time**: 4-6 horas                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface SeasonCardProps {                                                                                                                                                                                                                                 â”‚
â”‚   season: {                                                                                                                                                                                                                                                 â”‚
â”‚     id: string;                                                                                                                                                                                                                                             â”‚
â”‚     start_date: string;                                                                                                                                                                                                                                     â”‚
â”‚     end_date: string;                                                                                                                                                                                                                                       â”‚
â”‚     number_of_nights: string;                                                                                                                                                                                                                               â”‚
â”‚     category?: string;                                                                                                                                                                                                                                      â”‚
â”‚     allotment: number;                                                                                                                                                                                                                                      â”‚
â”‚     allotment_remain: number;                                                                                                                                                                                                                               â”‚
â”‚     prices: Array<{                                                                                                                                                                                                                                         â”‚
â”‚       room_name: string;                                                                                                                                                                                                                                    â”‚
â”‚       price: number;                                                                                                                                                                                                                                        â”‚
â”‚       currency: string;                                                                                                                                                                                                                                     â”‚
â”‚     }>;                                                                                                                                                                                                                                                     â”‚
â”‚   };                                                                                                                                                                                                                                                        â”‚
â”‚   index: number;                                                                                                                                                                                                                                            â”‚
â”‚   isSelected: boolean;                                                                                                                                                                                                                                      â”‚
â”‚   onSelect: () => void;                                                                                                                                                                                                                                     â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Card visualmente atractivo con gradiente                                                                                                                                                                                                                  â”‚
â”‚ - Mostrar fechas (Nov 15 - Dic 15, 2025)                                                                                                                                                                                                                    â”‚
â”‚ - Mostrar duraciÃ³n (8 noches)                                                                                                                                                                                                                               â”‚
â”‚ - Mostrar categorÃ­a (Alta Temporada) con badge                                                                                                                                                                                                              â”‚
â”‚ - Mostrar precio base desde                                                                                                                                                                                                                                 â”‚
â”‚ - **Real-time seat counter**: `${allotment_remain} plazas disponibles`                                                                                                                                                                                      â”‚
â”‚ - Estado seleccionado con borde colorido                                                                                                                                                                                                                    â”‚
â”‚ - Hover effect con elevaciÃ³n                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **DiseÃ±o Visual**:                                                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                                                                â”‚
â”‚ â”‚ ğŸŒŸ Alta Temporada        â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚                          â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚ Nov 15 - Dic 15, 2025    â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚ 8 noches                 â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚                          â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚ Desde $5,000 MXN         â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚                          â”‚                                                                                                                                                                                                                                â”‚
â”‚ â”‚ âœ… 15 plazas disponibles â”‚                                                                                                                                                                                                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                                                                â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **CÃ³digo Esqueleto**:                                                                                                                                                                                                                                       â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ export function SeasonCard({ season, index, isSelected, onSelect }: SeasonCardProps) {                                                                                                                                                                      â”‚
â”‚   const startDate = format(new Date(season.start_date), "MMM dd", { locale: es });                                                                                                                                                                          â”‚
â”‚   const endDate = format(new Date(season.end_date), "MMM dd, yyyy", { locale: es });                                                                                                                                                                        â”‚
â”‚   const minPrice = Math.min(...season.prices.map(p => p.price));                                                                                                                                                                                            â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   const availabilityStatus = season.allotment_remain <= 0 ? 'sold-out' :                                                                                                                                                                                    â”‚
â”‚                             season.allotment_remain <= 5 ? 'low-availability' :                                                                                                                                                                             â”‚
â”‚                             'available';                                                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   return (                                                                                                                                                                                                                                                  â”‚
â”‚     <div                                                                                                                                                                                                                                                    â”‚
â”‚       onClick={onSelect}                                                                                                                                                                                                                                    â”‚
â”‚       className={cn(                                                                                                                                                                                                                                        â”‚
â”‚         "min-w-[280px] p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300",                                                                                                                                                                â”‚
â”‚         isSelected ? "border-pink-500 bg-pink-50 shadow-xl" : "border-gray-200 hover:border-pink-300 hover:shadow-lg"                                                                                                                                       â”‚
â”‚       )}                                                                                                                                                                                                                                                    â”‚
â”‚     >                                                                                                                                                                                                                                                       â”‚
â”‚       {/* Category Badge */}                                                                                                                                                                                                                                â”‚
â”‚       <div className="flex items-center justify-between mb-4">                                                                                                                                                                                              â”‚
â”‚         <span className="text-sm font-semibold px-3 py-1 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full">                                                                                                                             â”‚
â”‚           {season.category || 'Temporada'}                                                                                                                                                                                                                  â”‚
â”‚         </span>                                                                                                                                                                                                                                             â”‚
â”‚         {availabilityStatus === 'low-availability' && (                                                                                                                                                                                                     â”‚
â”‚           <span className="text-xs font-semibold text-orange-600">Â¡Ãšltimas plazas!</span>                                                                                                                                                                   â”‚
â”‚         )}                                                                                                                                                                                                                                                  â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Dates */}                                                                                                                                                                                                                                         â”‚
â”‚       <div className="mb-2">                                                                                                                                                                                                                                â”‚
â”‚         <p className="text-lg font-bold text-gray-900">                                                                                                                                                                                                     â”‚
â”‚           {startDate} - {endDate}                                                                                                                                                                                                                           â”‚
â”‚         </p>                                                                                                                                                                                                                                                â”‚
â”‚         <p className="text-sm text-gray-600">                                                                                                                                                                                                               â”‚
â”‚           {season.number_of_nights} noches                                                                                                                                                                                                                  â”‚
â”‚         </p>                                                                                                                                                                                                                                                â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Price */}                                                                                                                                                                                                                                         â”‚
â”‚       <div className="mb-4">                                                                                                                                                                                                                                â”‚
â”‚         <p className="text-sm text-gray-600">Desde</p>                                                                                                                                                                                                      â”‚
â”‚         <p className="text-2xl font-black bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent">                                                                                                                                      â”‚
â”‚           ${minPrice.toLocaleString()} MXN                                                                                                                                                                                                                  â”‚
â”‚         </p>                                                                                                                                                                                                                                                â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Availability */}                                                                                                                                                                                                                                  â”‚
â”‚       {availabilityStatus !== 'sold-out' ? (                                                                                                                                                                                                                â”‚
â”‚         <div className="flex items-center gap-2">                                                                                                                                                                                                           â”‚
â”‚           <svg className="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">                                                                                                                                                                  â”‚
â”‚             <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />                                                        â”‚
â”‚           </svg>                                                                                                                                                                                                                                            â”‚
â”‚           <span className="text-sm font-medium text-green-700">                                                                                                                                                                                             â”‚
â”‚             {season.allotment_remain} plazas disponibles                                                                                                                                                                                                    â”‚
â”‚           </span>                                                                                                                                                                                                                                           â”‚
â”‚         </div>                                                                                                                                                                                                                                              â”‚
â”‚       ) : (                                                                                                                                                                                                                                                 â”‚
â”‚         <div className="flex items-center gap-2">                                                                                                                                                                                                           â”‚
â”‚           <svg className="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 20 20">                                                                                                                                                                    â”‚
â”‚             <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707    â”‚
â”‚ 7.293z" clipRule="evenodd" />                                                                                                                                                                                                                               â”‚
â”‚           </svg>                                                                                                                                                                                                                                            â”‚
â”‚           <span className="text-sm font-medium text-red-700">                                                                                                                                                                                               â”‚
â”‚             Agotado                                                                                                                                                                                                                                         â”‚
â”‚           </span>                                                                                                                                                                                                                                           â”‚
â”‚         </div>                                                                                                                                                                                                                                              â”‚
â”‚       )}                                                                                                                                                                                                                                                    â”‚
â”‚     </div>                                                                                                                                                                                                                                                  â”‚
â”‚   );                                                                                                                                                                                                                                                        â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 2. **RoomTypeSelector Component** (NUEVO âœ¨)                                                                                                                                                                                                             â”‚
â”‚ **UbicaciÃ³n**: `src/components/booking/RoomTypeSelector.tsx`                                                                                                                                                                                                â”‚
â”‚ **Prioridad**: ALTA                                                                                                                                                                                                                                         â”‚
â”‚ **Estimated Time**: 4-6 horas                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface RoomTypeSelectorProps {                                                                                                                                                                                                                           â”‚
â”‚   prices: Array<{                                                                                                                                                                                                                                           â”‚
â”‚     id: string;                                                                                                                                                                                                                                             â”‚
â”‚     room_name: string;                                                                                                                                                                                                                                      â”‚
â”‚     price: number;                                                                                                                                                                                                                                          â”‚
â”‚     currency: string;                                                                                                                                                                                                                                       â”‚
â”‚     max_adult: number;                                                                                                                                                                                                                                      â”‚
â”‚     max_minor: number;                                                                                                                                                                                                                                      â”‚
â”‚     children?: Array<{                                                                                                                                                                                                                                      â”‚
â”‚       name: string;                                                                                                                                                                                                                                         â”‚
â”‚       min_minor_age: number;                                                                                                                                                                                                                                â”‚
â”‚       max_minor_age: number;                                                                                                                                                                                                                                â”‚
â”‚       child_price: number;                                                                                                                                                                                                                                  â”‚
â”‚     }>;                                                                                                                                                                                                                                                     â”‚
â”‚   }>;                                                                                                                                                                                                                                                       â”‚
â”‚   selected: string | null;  // price.id                                                                                                                                                                                                                     â”‚
â”‚   onSelect: (priceId: string) => void;                                                                                                                                                                                                                      â”‚
â”‚   adults: number;                                                                                                                                                                                                                                           â”‚
â”‚   kids: number;                                                                                                                                                                                                                                             â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Grid de cards para cada tipo de habitaciÃ³n                                                                                                                                                                                                                â”‚
â”‚ - Mostrar capacidad (2 adultos + 2 niÃ±os)                                                                                                                                                                                                                   â”‚
â”‚ - Mostrar precio por habitaciÃ³n                                                                                                                                                                                                                             â”‚
â”‚ - Iconos visuales (ğŸ›ï¸ cama, ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ personas)                                                                                                                                                                                                          â”‚
â”‚ - ValidaciÃ³n de capacidad (disable si excede)                                                                                                                                                                                                               â”‚
â”‚ - Estado seleccionado con checkmark                                                                                                                                                                                                                         â”‚
â”‚ - Tooltip con desglose de precios para niÃ±os                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **DiseÃ±o Visual**:                                                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                      â”‚
â”‚ â”‚ ğŸ›ï¸ HabitaciÃ³n Dobleâ”‚  â”‚ ğŸ›ï¸ğŸ›ï¸ HabitaciÃ³n    â”‚  â”‚ ğŸ›ï¸ğŸ›ï¸ğŸ›ï¸ Suite      â”‚                                                                                                                                                                                 â”‚
â”‚ â”‚                    â”‚  â”‚     Triple         â”‚  â”‚                    â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚ ğŸ‘¥ 2 adultos       â”‚  â”‚ ğŸ‘¥ 3 adultos       â”‚  â”‚ ğŸ‘¥ 4 adultos       â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚ ğŸ‘¶ 2 niÃ±os         â”‚  â”‚ ğŸ‘¶ 1 niÃ±o          â”‚  â”‚ ğŸ‘¶ 2 niÃ±os         â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚                    â”‚  â”‚                    â”‚  â”‚                    â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚ $5,000 MXN         â”‚  â”‚ $7,000 MXN         â”‚  â”‚ $10,000 MXN        â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚                    â”‚  â”‚                    â”‚  â”‚                    â”‚                                                                                                                                                                                      â”‚
â”‚ â”‚ âœ… Compatible      â”‚  â”‚ âš ï¸ Capacidad       â”‚  â”‚ âš ï¸ Excede adultos  â”‚                                                                                                                                                                                       â”‚
â”‚ â”‚                    â”‚  â”‚    excedida        â”‚  â”‚                    â”‚                                                                                                                                                                                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                      â”‚
â”‚    (seleccionable)         (deshabilitado)          (deshabilitado)                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 3. **CompanionDetailsForm Component** (NUEVO âœ¨)                                                                                                                                                                                                         â”‚
â”‚ **UbicaciÃ³n**: `src/components/booking/CompanionDetailsForm.tsx`                                                                                                                                                                                            â”‚
â”‚ **Prioridad**: MEDIA                                                                                                                                                                                                                                        â”‚
â”‚ **Estimated Time**: 6-8 horas                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface CompanionDetailsFormProps {                                                                                                                                                                                                                       â”‚
â”‚   companions: Array<{                                                                                                                                                                                                                                       â”‚
â”‚     id: string;                                                                                                                                                                                                                                             â”‚
â”‚     name: string;                                                                                                                                                                                                                                           â”‚
â”‚     family_name: string;                                                                                                                                                                                                                                    â”‚
â”‚     birthday: string;                                                                                                                                                                                                                                       â”‚
â”‚     gender?: 'male' | 'female' | 'other';                                                                                                                                                                                                                   â”‚
â”‚     country?: string;                                                                                                                                                                                                                                       â”‚
â”‚     passport_number?: string;                                                                                                                                                                                                                               â”‚
â”‚     isLeadPassenger: boolean;                                                                                                                                                                                                                               â”‚
â”‚   }>;                                                                                                                                                                                                                                                       â”‚
â”‚   onUpdate: (companions: Array<...>) => void;                                                                                                                                                                                                               â”‚
â”‚   totalAdults: number;                                                                                                                                                                                                                                      â”‚
â”‚   productType: 'circuit' | 'package';  // International trips require passport                                                                                                                                                                              â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Un formulario por cada adulto                                                                                                                                                                                                                             â”‚
â”‚ - Accordion expandible con preview                                                                                                                                                                                                                          â”‚
â”‚ - ValidaciÃ³n con Zod schema                                                                                                                                                                                                                                 â”‚
â”‚ - Campo de pasaporte condicional (internacional)                                                                                                                                                                                                            â”‚
â”‚ - Lead passenger selector (radio button)                                                                                                                                                                                                                    â”‚
â”‚ - Auto-save en localStorage                                                                                                                                                                                                                                 â”‚
â”‚ - Error messages inline                                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **DiseÃ±o Visual**:                                                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                                 â”‚
â”‚ â”‚ AcompaÃ±ante 1 (Pasajero principal) âœ…                   â”‚                                                                                                                                                                                                  â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ Nombre: [Juan                ]  Apellido: [PÃ©rez      ] â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ Fecha de nacimiento: [ğŸ“… 15/03/1985                   ] â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ GÃ©nero: [âšª Masculino âšª Femenino âšª Otro              ] â”‚                                                                                                                                                                                                   â”‚
â”‚ â”‚ PaÃ­s: [ğŸ‡²ğŸ‡½ MÃ©xico                                     ] â”‚                                                                                                                                                                                                â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ âœˆï¸ Viaje Internacional                                  â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ Pasaporte: [M12345678                                 ] â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â˜‘ï¸ Pasajero principal                                   â”‚                                                                                                                                                                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                                 â”‚
â”‚ â”‚ AcompaÃ±ante 2 â–¼                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ MarÃ­a LÃ³pez (15/06/1987) - Completado âœ“                â”‚                                                                                                                                                                                                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                                 â”‚
â”‚    (collapsed accordion)                                                                                                                                                                                                                                    â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 4. **ExtraServicesSelector Component** (NUEVO âœ¨)                                                                                                                                                                                                        â”‚
â”‚ **UbicaciÃ³n**: `src/components/booking/ExtraServicesSelector.tsx`                                                                                                                                                                                           â”‚
â”‚ **Prioridad**: BAJA                                                                                                                                                                                                                                         â”‚
â”‚ **Estimated Time**: 3-4 horas                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface ExtraServicesSelectorProps {                                                                                                                                                                                                                      â”‚
â”‚   extraServices: Array<{                                                                                                                                                                                                                                    â”‚
â”‚     id: string;                                                                                                                                                                                                                                             â”‚
â”‚     service_name: string;                                                                                                                                                                                                                                   â”‚
â”‚     description?: string;                                                                                                                                                                                                                                   â”‚
â”‚     price: number;                                                                                                                                                                                                                                          â”‚
â”‚     currency: string;                                                                                                                                                                                                                                       â”‚
â”‚     icon?: string;  // emoji o icon name                                                                                                                                                                                                                    â”‚
â”‚   }>;                                                                                                                                                                                                                                                       â”‚
â”‚   selected: string[];  // Array of service IDs                                                                                                                                                                                                              â”‚
â”‚   onToggle: (serviceId: string) => void;                                                                                                                                                                                                                    â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Checkboxes con descripciÃ³n                                                                                                                                                                                                                                â”‚
â”‚ - Precio claramente visible                                                                                                                                                                                                                                 â”‚
â”‚ - Iconos para servicios comunes (ğŸšŒ Transfer, ğŸ›¡ï¸ Seguro, ğŸ“¸ Tour)                                                                                                                                                                                          â”‚
â”‚ - Total parcial de servicios seleccionados                                                                                                                                                                                                                  â”‚
â”‚ - Optional badge si el servicio es recomendado                                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **DiseÃ±o Visual**:                                                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                                 â”‚
â”‚ â”‚ Servicios Adicionales (Opcional)                        â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â˜‘ï¸ ğŸšŒ Transfer Aeropuerto - Hotel                       â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    Transporte privado desde/hasta el aeropuerto         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    +$800 MXN                                            â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â˜ ğŸ›¡ï¸ Seguro de Viaje Completo                          â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    Cobertura mÃ©dica, cancelaciÃ³n, equipaje              â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    +$1,200 MXN  [â­ Recomendado]                        â”‚                                                                                                                                                                                                  â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â˜‘ï¸ ğŸ“¸ City Tour Adicional                               â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    Tour guiado de 4 horas por la ciudad                 â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚    +$600 MXN                                            â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ Subtotal servicios: $1,400 MXN                          â”‚                                                                                                                                                                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                                 â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 5. **ItineraryCard Component** (NUEVO âœ¨)                                                                                                                                                                                                                â”‚
â”‚ **UbicaciÃ³n**: `src/components/marketplace/ItineraryCard.tsx`                                                                                                                                                                                               â”‚
â”‚ **Prioridad**: MEDIA                                                                                                                                                                                                                                        â”‚
â”‚ **Estimated Time**: 4-6 horas                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface ItineraryCardProps {                                                                                                                                                                                                                              â”‚
â”‚   itinerary: string;  // Markdown or plain text with day-by-day                                                                                                                                                                                             â”‚
â”‚   productType: 'circuit' | 'package';                                                                                                                                                                                                                       â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Parse itinerary text (asume formato: "DÃ­a 1: ...\nDÃ­a 2: ...")                                                                                                                                                                                            â”‚
â”‚ - Timeline visual con iconos por dÃ­a                                                                                                                                                                                                                        â”‚
â”‚ - Expandible/colapsable por dÃ­a                                                                                                                                                                                                                             â”‚
â”‚ - Iconos contextuales (ğŸ¨ hotel, ğŸ½ï¸ comida, ğŸšŒ transporte)                                                                                                                                                                                                 â”‚
â”‚ - Markdown rendering si es formato rich text                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **DiseÃ±o Visual**:                                                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                                                                                                 â”‚
â”‚ â”‚ ğŸ“… DÃ­a 1: Llegada a CancÃºn                              â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”œâ”€ ğŸ›¬ Llegada al aeropuerto internacional               â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”œâ”€ ğŸšŒ Transfer al hotel                                 â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”œâ”€ ğŸ¨ Check-in en hotel 5 estrellas                     â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â””â”€ ğŸ½ï¸ Cena de bienvenida                                â”‚                                                                                                                                                                                                â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ ğŸ“… DÃ­a 2: ChichÃ©n ItzÃ¡ â–¼                                â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”œâ”€ ğŸŒ… Desayuno buffet                                   â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â”œâ”€ ğŸšŒ Salida a ChichÃ©n ItzÃ¡ (8:00 AM)                   â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ â””â”€ ...                                                  â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚                                                         â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ ğŸ“… DÃ­a 3: Playa del Carmen â–¼                            â”‚                                                                                                                                                                                                 â”‚
â”‚ â”‚ ...                                                     â”‚                                                                                                                                                                                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                                                                                                                 â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 6. **PaymentPlanSummary Component** (VERIFICAR EXISTENTE)                                                                                                                                                                                               â”‚
â”‚ **UbicaciÃ³n**: `src/components/booking/PaymentPlanSummary.tsx`                                                                                                                                                                                              â”‚
â”‚ **Prioridad**: ALTA                                                                                                                                                                                                                                         â”‚
â”‚ **Estimated Time**: 2-4 horas (si necesita refactoring)                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **AcciÃ³n**: Verificar si este componente ya existe y funciona correctamente. Si no, crear.                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Props Interface**:                                                                                                                                                                                                                                        â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ interface PaymentPlanSummaryProps {                                                                                                                                                                                                                         â”‚
â”‚   paymentPlan: {                                                                                                                                                                                                                                            â”‚
â”‚     plan_type: 'CONTADO' | 'PLAZOS';                                                                                                                                                                                                                        â”‚
â”‚     cash_discount_percentage?: number;                                                                                                                                                                                                                      â”‚
â”‚     cash_final_amount?: number;                                                                                                                                                                                                                             â”‚
â”‚     installment_count?: number;                                                                                                                                                                                                                             â”‚
â”‚     installment_amount?: number;                                                                                                                                                                                                                            â”‚
â”‚     down_payment_amount?: number;                                                                                                                                                                                                                           â”‚
â”‚     installments?: Array<{                                                                                                                                                                                                                                  â”‚
â”‚       installment_number: number;                                                                                                                                                                                                                           â”‚
â”‚       amount: number;                                                                                                                                                                                                                                       â”‚
â”‚       due_date: string;                                                                                                                                                                                                                                     â”‚
â”‚       status: string;                                                                                                                                                                                                                                       â”‚
â”‚     }>;                                                                                                                                                                                                                                                     â”‚
â”‚   };                                                                                                                                                                                                                                                        â”‚
â”‚   selectedType: 'CONTADO' | 'PLAZOS';                                                                                                                                                                                                                       â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Mostrar resumen segÃºn plan seleccionado                                                                                                                                                                                                                   â”‚
â”‚ - CONTADO: Monto final con descuento aplicado                                                                                                                                                                                                               â”‚
â”‚ - PLAZOS: Down payment + cuotas mensuales                                                                                                                                                                                                                   â”‚
â”‚ - Timeline de pagos para PLAZOS                                                                                                                                                                                                                             â”‚
â”‚ - Fechas de vencimiento claramente visibles                                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ“ PÃ¡ginas a Crear                                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 1. **Product Detail Page** (NUEVO âœ¨)                                                                                                                                                                                                                    â”‚
â”‚ **UbicaciÃ³n**: `src/app/marketplace/booking/[productId]/page.tsx`                                                                                                                                                                                           â”‚
â”‚ **Prioridad**: ALTA                                                                                                                                                                                                                                         â”‚
â”‚ **Estimated Time**: 8-12 horas                                                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Funcionalidad**:                                                                                                                                                                                                                                          â”‚
â”‚ - Server Component (SSR)                                                                                                                                                                                                                                    â”‚
â”‚ - Fetch product data con `getProductByIdAction`                                                                                                                                                                                                             â”‚
â”‚ - Integrate all sections (Gallery, Description, Itinerary, Seasons, Hotels, Map, Reviews)                                                                                                                                                                   â”‚
â”‚ - Sticky footer con CTA "Continuar con ReservaciÃ³n"                                                                                                                                                                                                         â”‚
â”‚ - Responsive design (mobile-first)                                                                                                                                                                                                                          â”‚
â”‚ - SEO optimizado (metadata dinÃ¡mico)                                                                                                                                                                                                                        â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Estructura**:                                                                                                                                                                                                                                             â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // src/app/marketplace/booking/[productId]/page.tsx                                                                                                                                                                                                         â”‚
â”‚ import { getProductByIdAction } from '@/lib/server/marketplace-product-actions';                                                                                                                                                                            â”‚
â”‚ import { ProductDetailClient } from './product-detail-client';                                                                                                                                                                                              â”‚
â”‚ import { notFound } from 'next/navigation';                                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ export async function generateMetadata({ params }: { params: { productId: string } }) {                                                                                                                                                                     â”‚
â”‚   const result = await getProductByIdAction(params.productId);                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   if (!result.success || !result.data) {                                                                                                                                                                                                                    â”‚
â”‚     return { title: 'Producto no encontrado' };                                                                                                                                                                                                             â”‚
â”‚   }                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   return {                                                                                                                                                                                                                                                  â”‚
â”‚     title: `${result.data.product.name} - YAAN Viajes`,                                                                                                                                                                                                     â”‚
â”‚     description: result.data.product.description?.substring(0, 160),                                                                                                                                                                                        â”‚
â”‚     openGraph: {                                                                                                                                                                                                                                            â”‚
â”‚       images: [result.data.product.cover_image_url],                                                                                                                                                                                                        â”‚
â”‚     },                                                                                                                                                                                                                                                      â”‚
â”‚   };                                                                                                                                                                                                                                                        â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ export default async function ProductDetailPage({ params }: { params: { productId: string } }) {                                                                                                                                                            â”‚
â”‚   const result = await getProductByIdAction(params.productId);                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   if (!result.success || !result.data) {                                                                                                                                                                                                                    â”‚
â”‚     notFound();                                                                                                                                                                                                                                             â”‚
â”‚   }                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   return <ProductDetailClient product={result.data.product} />;                                                                                                                                                                                             â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Client Component**:                                                                                                                                                                                                                                       â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // src/app/marketplace/booking/[productId]/product-detail-client.tsx                                                                                                                                                                                        â”‚
â”‚ 'use client';                                                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ import { useState, useRef } from 'react';                                                                                                                                                                                                                   â”‚
â”‚ import { ProductGalleryHeader, ProductGalleryHeaderHandle } from '@/components/marketplace/ProductGalleryHeader';                                                                                                                                           â”‚
â”‚ import { FullscreenGallery } from '@/components/marketplace/FullscreenGallery';                                                                                                                                                                             â”‚
â”‚ import { HybridProductMap } from '@/components/marketplace/maps/HybridProductMap';                                                                                                                                                                          â”‚
â”‚ import { SeasonCard } from '@/components/booking/SeasonCard';                                                                                                                                                                                               â”‚
â”‚ import { ItineraryCard } from '@/components/marketplace/ItineraryCard';                                                                                                                                                                                     â”‚
â”‚ import { useRouter } from 'next/navigation';                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ export function ProductDetailClient({ product }: { product: MarketplaceProduct }) {                                                                                                                                                                         â”‚
â”‚   const router = useRouter();                                                                                                                                                                                                                               â”‚
â”‚   const [showFullscreenGallery, setShowFullscreenGallery] = useState(false);                                                                                                                                                                                â”‚
â”‚   const [selectedSeasonIndex, setSelectedSeasonIndex] = useState(0);                                                                                                                                                                                        â”‚
â”‚   const galleryRef = useRef<ProductGalleryHeaderHandle>(null);                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   const handleContinueToWizard = async () => {                                                                                                                                                                                                              â”‚
â”‚     // Encrypt product data                                                                                                                                                                                                                                 â”‚
â”‚     const encryptionResult = await encryptProductUrlAction(product.id, product.name, product.product_type);                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚     // Navigate to wizard                                                                                                                                                                                                                                   â”‚
â”‚     router.push(`/marketplace/booking/wizard?product=${encryptionResult.encrypted}`);                                                                                                                                                                       â”‚
â”‚   };                                                                                                                                                                                                                                                        â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   return (                                                                                                                                                                                                                                                  â”‚
â”‚     <div className="min-h-screen bg-gray-50">                                                                                                                                                                                                               â”‚
â”‚       {/* Gallery Header */}                                                                                                                                                                                                                                â”‚
â”‚       <div className="relative h-96">                                                                                                                                                                                                                       â”‚
â”‚         <ProductGalleryHeader                                                                                                                                                                                                                               â”‚
â”‚           ref={galleryRef}                                                                                                                                                                                                                                  â”‚
â”‚           images={[product.cover_image_url, ...(product.image_url || [])]}                                                                                                                                                                                  â”‚
â”‚           videos={product.video_url}                                                                                                                                                                                                                        â”‚
â”‚           alt={product.name}                                                                                                                                                                                                                                â”‚
â”‚           onOpenFullscreen={() => {                                                                                                                                                                                                                         â”‚
â”‚             galleryRef.current?.pause();                                                                                                                                                                                                                    â”‚
â”‚             setShowFullscreenGallery(true);                                                                                                                                                                                                                 â”‚
â”‚           }}                                                                                                                                                                                                                                                â”‚
â”‚         />                                                                                                                                                                                                                                                  â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Content Sections */}                                                                                                                                                                                                                              â”‚
â”‚       <div className="max-w-5xl mx-auto px-4 py-8 space-y-12">                                                                                                                                                                                              â”‚
â”‚         {/* Summary Section */}                                                                                                                                                                                                                             â”‚
â”‚         <section>                                                                                                                                                                                                                                           â”‚
â”‚           <h1 className="text-4xl font-bold text-gray-900 mb-4">{product.name}</h1>                                                                                                                                                                         â”‚
â”‚           <div className="flex items-center gap-4 text-gray-600">                                                                                                                                                                                           â”‚
â”‚             <span>â­â­â­â­â­ 4.8 / 5</span>                                                                                                                                                                                                                      â”‚
â”‚             <span>â€¢</span>                                                                                                                                                                                                                                  â”‚
â”‚             <span>Desde ${product.min_product_price?.toLocaleString()} MXN</span>                                                                                                                                                                           â”‚
â”‚           </div>                                                                                                                                                                                                                                            â”‚
â”‚         </section>                                                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚         {/* Description */}                                                                                                                                                                                                                                 â”‚
â”‚         <section className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">                                                                                                                                                                     â”‚
â”‚           <h2 className="text-2xl font-bold text-gray-900 mb-4">DescripciÃ³n</h2>                                                                                                                                                                            â”‚
â”‚           <p className="text-gray-700 whitespace-pre-wrap leading-relaxed">                                                                                                                                                                                 â”‚
â”‚             {product.description}                                                                                                                                                                                                                           â”‚
â”‚           </p>                                                                                                                                                                                                                                              â”‚
â”‚         </section>                                                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚         {/* Itinerary */}                                                                                                                                                                                                                                   â”‚
â”‚         {product.itinerary && (                                                                                                                                                                                                                             â”‚
â”‚           <section className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">                                                                                                                                                                   â”‚
â”‚             <h2 className="text-2xl font-bold text-gray-900 mb-4">Itinerario</h2>                                                                                                                                                                           â”‚
â”‚             <ItineraryCard itinerary={product.itinerary} productType={product.product_type} />                                                                                                                                                              â”‚
â”‚           </section>                                                                                                                                                                                                                                        â”‚
â”‚         )}                                                                                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚         {/* Seasons */}                                                                                                                                                                                                                                     â”‚
â”‚         {product.seasons && product.seasons.length > 0 && (                                                                                                                                                                                                 â”‚
â”‚           <section className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">                                                                                                                                                                   â”‚
â”‚             <h2 className="text-2xl font-bold text-gray-900 mb-4">Temporadas y Precios</h2>                                                                                                                                                                 â”‚
â”‚             <div className="flex gap-6 overflow-x-auto pb-4">                                                                                                                                                                                               â”‚
â”‚               {product.seasons.map((season, index) => (                                                                                                                                                                                                     â”‚
â”‚                 <SeasonCard                                                                                                                                                                                                                                 â”‚
â”‚                   key={season.id}                                                                                                                                                                                                                           â”‚
â”‚                   season={season}                                                                                                                                                                                                                           â”‚
â”‚                   index={index}                                                                                                                                                                                                                             â”‚
â”‚                   isSelected={selectedSeasonIndex === index}                                                                                                                                                                                                â”‚
â”‚                   onSelect={() => setSelectedSeasonIndex(index)}                                                                                                                                                                                            â”‚
â”‚                 />                                                                                                                                                                                                                                          â”‚
â”‚               ))}                                                                                                                                                                                                                                           â”‚
â”‚             </div>                                                                                                                                                                                                                                          â”‚
â”‚           </section>                                                                                                                                                                                                                                        â”‚
â”‚         )}                                                                                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚         {/* Map */}                                                                                                                                                                                                                                         â”‚
â”‚         {product.destination && product.destination.length > 0 && (                                                                                                                                                                                         â”‚
â”‚           <section className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">                                                                                                                                                                   â”‚
â”‚             <h2 className="text-2xl font-bold text-gray-900 mb-4">Mapa de Ruta</h2>                                                                                                                                                                         â”‚
â”‚             <HybridProductMap                                                                                                                                                                                                                               â”‚
â”‚               destinations={product.destination}                                                                                                                                                                                                            â”‚
â”‚               productType={product.product_type}                                                                                                                                                                                                            â”‚
â”‚               productName={product.name}                                                                                                                                                                                                                    â”‚
â”‚             />                                                                                                                                                                                                                                              â”‚
â”‚           </section>                                                                                                                                                                                                                                        â”‚
â”‚         )}                                                                                                                                                                                                                                                  â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Sticky Footer CTA */}                                                                                                                                                                                                                             â”‚
â”‚       <div className="fixed bottom-0 left-0 right-0 bg-white/98 backdrop-blur-md border-t-2 border-pink-200 p-5 shadow-2xl">                                                                                                                                â”‚
â”‚         <div className="max-w-5xl mx-auto flex items-center justify-between">                                                                                                                                                                               â”‚
â”‚           <div>                                                                                                                                                                                                                                             â”‚
â”‚             <p className="text-xs font-semibold text-gray-500 uppercase">Desde</p>                                                                                                                                                                          â”‚
â”‚             <p className="text-2xl font-black bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent">                                                                                                                                  â”‚
â”‚               ${product.min_product_price?.toLocaleString() || '0'} MXN                                                                                                                                                                                     â”‚
â”‚             </p>                                                                                                                                                                                                                                            â”‚
â”‚           </div>                                                                                                                                                                                                                                            â”‚
â”‚           <button                                                                                                                                                                                                                                           â”‚
â”‚             onClick={handleContinueToWizard}                                                                                                                                                                                                                â”‚
â”‚             className="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-4 rounded-xl font-bold hover:shadow-2xl transition-all duration-300 transform hover:scale-105"                                                                       â”‚
â”‚           >                                                                                                                                                                                                                                                 â”‚
â”‚             Continuar con ReservaciÃ³n â†’                                                                                                                                                                                                                     â”‚
â”‚           </button>                                                                                                                                                                                                                                         â”‚
â”‚         </div>                                                                                                                                                                                                                                              â”‚
â”‚       </div>                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚       {/* Fullscreen Gallery */}                                                                                                                                                                                                                            â”‚
â”‚       <FullscreenGallery                                                                                                                                                                                                                                    â”‚
â”‚         images={[product.cover_image_url, ...(product.image_url || [])]}                                                                                                                                                                                    â”‚
â”‚         videos={product.video_url}                                                                                                                                                                                                                          â”‚
â”‚         alt={product.name}                                                                                                                                                                                                                                  â”‚
â”‚         isOpen={showFullscreenGallery}                                                                                                                                                                                                                      â”‚
â”‚         onClose={() => {                                                                                                                                                                                                                                    â”‚
â”‚           galleryRef.current?.resume();                                                                                                                                                                                                                     â”‚
â”‚           setShowFullscreenGallery(false);                                                                                                                                                                                                                  â”‚
â”‚         }}                                                                                                                                                                                                                                                  â”‚
â”‚       />                                                                                                                                                                                                                                                    â”‚
â”‚     </div>                                                                                                                                                                                                                                                  â”‚
â”‚   );                                                                                                                                                                                                                                                        â”‚
â”‚ }                                                                                                                                                                                                                                                           â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ”§ Modificaciones a CÃ³digo Existente                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 1. **marketplace-client.tsx** (Modificar flujo de reserva)                                                                                                                                                                                              â”‚
â”‚ **UbicaciÃ³n**: `src/app/marketplace/marketplace-client.tsx`                                                                                                                                                                                                 â”‚
â”‚ **LÃ­nea**: ~228-270 (funciÃ³n `handleReserveExperience`)                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Cambio**:                                                                                                                                                                                                                                                 â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // ANTES: Navigate directo a booking wizard                                                                                                                                                                                                                 â”‚
â”‚ router.push(`/marketplace/booking?product=${encryptionResult.encrypted}`);                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // DESPUÃ‰S: Navigate a product detail page primero                                                                                                                                                                                                          â”‚
â”‚ router.push(`/marketplace/booking/${product.id}`);                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 2. **ProductDetailModal.tsx** (Actualizar botÃ³n "Reservar ahora")                                                                                                                                                                                       â”‚
â”‚ **UbicaciÃ³n**: `src/components/marketplace/ProductDetailModal.tsx`                                                                                                                                                                                          â”‚
â”‚ **LÃ­nea**: ~209-267 (funciÃ³n `handleReserveClick`)                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Cambio**:                                                                                                                                                                                                                                                 â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // ANTES: Navigate directo a booking wizard                                                                                                                                                                                                                 â”‚
â”‚ router.push(bookingUrl);                                                                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // DESPUÃ‰S: Navigate a product detail page primero                                                                                                                                                                                                          â”‚
â”‚ router.push(`/marketplace/booking/${product.id}`);                                                                                                                                                                                                          â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### 3. **booking-client.tsx** (Integrar componentes nuevos)                                                                                                                                                                                                 â”‚
â”‚ **UbicaciÃ³n**: `src/app/marketplace/booking/booking-client.tsx`                                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Cambios**:                                                                                                                                                                                                                                                â”‚
â”‚ - Importar `RoomTypeSelector`, `CompanionDetailsForm`, `ExtraServicesSelector`                                                                                                                                                                              â”‚
â”‚ - Agregar estados al `formData`:                                                                                                                                                                                                                            â”‚
â”‚   ```typescript                                                                                                                                                                                                                                             â”‚
â”‚   interface BookingFormData {                                                                                                                                                                                                                               â”‚
â”‚     // Existentes                                                                                                                                                                                                                                           â”‚
â”‚     selectedSeasonId?: string;                                                                                                                                                                                                                              â”‚
â”‚     selectedDate?: string;                                                                                                                                                                                                                                  â”‚
â”‚     adults: number;                                                                                                                                                                                                                                         â”‚
â”‚     kids: number;                                                                                                                                                                                                                                           â”‚
â”‚     babys: number;                                                                                                                                                                                                                                          â”‚
â”‚     paymentType: 'CONTADO' | 'PLAZOS';                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚     // NUEVOS âœ¨                                                                                                                                                                                                                                             â”‚
â”‚     selectedRoomTypeId?: string;  // price.id                                                                                                                                                                                                               â”‚
â”‚     companions?: Array<CompanionDetails>;                                                                                                                                                                                                                   â”‚
â”‚     selectedExtraServices?: string[];  // Array of service IDs                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚     // Generados por backend                                                                                                                                                                                                                                â”‚
â”‚     reservationId?: string;                                                                                                                                                                                                                                 â”‚
â”‚     paymentPlan?: PaymentPlan;                                                                                                                                                                                                                              â”‚
â”‚   }                                                                                                                                                                                                                                                         â”‚
â”‚   ```                                                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ - **SelectDateStep**: Agregar `RoomTypeSelector` despuÃ©s de selecciÃ³n de temporada                                                                                                                                                                          â”‚
â”‚ - **TravelersStep**: Agregar `CompanionDetailsForm` y `ExtraServicesSelector`                                                                                                                                                                               â”‚
â”‚ - **ReviewStep**: Mostrar resumen de companions y servicios extra                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ§ª Testing Plan                                                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Unit Tests (Jest + React Testing Library)                                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **1. SeasonCard Component**                                                                                                                                                                                                                                 â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // src/components/booking/SeasonCard.test.tsx                                                                                                                                                                                                               â”‚
â”‚ describe('SeasonCard', () => {                                                                                                                                                                                                                              â”‚
â”‚   it('renders season details correctly', () => {});                                                                                                                                                                                                         â”‚
â”‚   it('shows availability badge when slots > 0', () => {});                                                                                                                                                                                                  â”‚
â”‚   it('shows sold-out badge when allotment_remain = 0', () => {});                                                                                                                                                                                           â”‚
â”‚   it('highlights selected state', () => {});                                                                                                                                                                                                                â”‚
â”‚   it('calls onSelect when clicked', () => {});                                                                                                                                                                                                              â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **2. RoomTypeSelector Component**                                                                                                                                                                                                                           â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ describe('RoomTypeSelector', () => {                                                                                                                                                                                                                        â”‚
â”‚   it('renders all room types', () => {});                                                                                                                                                                                                                   â”‚
â”‚   it('disables rooms exceeding capacity', () => {});                                                                                                                                                                                                        â”‚
â”‚   it('shows capacity validation message', () => {});                                                                                                                                                                                                        â”‚
â”‚   it('calls onSelect with priceId', () => {});                                                                                                                                                                                                              â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **3. CompanionDetailsForm Component**                                                                                                                                                                                                                       â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ describe('CompanionDetailsForm', () => {                                                                                                                                                                                                                    â”‚
â”‚   it('renders form for each adult', () => {});                                                                                                                                                                                                              â”‚
â”‚   it('validates required fields', () => {});                                                                                                                                                                                                                â”‚
â”‚   it('shows passport field for international trips', () => {});                                                                                                                                                                                             â”‚
â”‚   it('allows selecting lead passenger', () => {});                                                                                                                                                                                                          â”‚
â”‚   it('calls onUpdate with valid data', () => {});                                                                                                                                                                                                           â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Integration Tests                                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **1. Product Detail Page Flow**                                                                                                                                                                                                                             â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ describe('Product Detail Page', () => {                                                                                                                                                                                                                     â”‚
â”‚   it('fetches and displays product data', async () => {});                                                                                                                                                                                                  â”‚
â”‚   it('opens fullscreen gallery on image click', () => {});                                                                                                                                                                                                  â”‚
â”‚   it('pauses carousel when fullscreen opens', () => {});                                                                                                                                                                                                    â”‚
â”‚   it('navigates to wizard on CTA click', () => {});                                                                                                                                                                                                         â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **2. Booking Wizard Flow**                                                                                                                                                                                                                                  â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ describe('Booking Wizard', () => {                                                                                                                                                                                                                          â”‚
â”‚   it('completes full booking flow', async () => {                                                                                                                                                                                                           â”‚
â”‚     // 1. Select season                                                                                                                                                                                                                                     â”‚
â”‚     // 2. Select room type                                                                                                                                                                                                                                  â”‚
â”‚     // 3. Select date                                                                                                                                                                                                                                       â”‚
â”‚     // 4. Enter travelers                                                                                                                                                                                                                                   â”‚
â”‚     // 5. Enter companion details                                                                                                                                                                                                                           â”‚
â”‚     // 6. Select extra services                                                                                                                                                                                                                             â”‚
â”‚     // 7. Review and confirm                                                                                                                                                                                                                                â”‚
â”‚     // 8. Redirect to payment                                                                                                                                                                                                                               â”‚
â”‚   });                                                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   it('validates availability before creating reservation', async () => {});                                                                                                                                                                                 â”‚
â”‚   it('handles sold-out seasons correctly', async () => {});                                                                                                                                                                                                 â”‚
â”‚   it('handles capacity exceeded errors', async () => {});                                                                                                                                                                                                   â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### End-to-End Tests (Playwright)                                                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **1. Complete User Journey**                                                                                                                                                                                                                                â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ test('complete booking flow from marketplace to payment', async ({ page }) => {                                                                                                                                                                             â”‚
â”‚   // 1. Navigate to marketplace                                                                                                                                                                                                                             â”‚
â”‚   await page.goto('/marketplace');                                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 2. Click on product                                                                                                                                                                                                                                    â”‚
â”‚   await page.click('[data-testid="experience-card-1"]');                                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 3. Click "Ver detalles"                                                                                                                                                                                                                                â”‚
â”‚   await page.click('[data-testid="product-detail-btn"]');                                                                                                                                                                                                   â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 4. Scroll through sections (Gallery, Description, Itinerary, Seasons, Map)                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 5. Click "Continuar con ReservaciÃ³n"                                                                                                                                                                                                                   â”‚
â”‚   await page.click('[data-testid="continue-booking-btn"]');                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 6. Wizard Step 1: Select season, room type, date                                                                                                                                                                                                       â”‚
â”‚   await page.click('[data-testid="season-card-0"]');                                                                                                                                                                                                        â”‚
â”‚   await page.click('[data-testid="room-type-doble"]');                                                                                                                                                                                                      â”‚
â”‚   await page.click('[data-testid="date-2025-12-25"]');                                                                                                                                                                                                      â”‚
â”‚   await page.click('[data-testid="continue-step-1"]');                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 7. Wizard Step 2: Enter travelers and companions                                                                                                                                                                                                       â”‚
â”‚   await page.fill('[data-testid="adults-input"]', '2');                                                                                                                                                                                                     â”‚
â”‚   await page.fill('[data-testid="kids-input"]', '1');                                                                                                                                                                                                       â”‚
â”‚   await page.fill('[data-testid="companion-1-name"]', 'Juan');                                                                                                                                                                                              â”‚
â”‚   await page.fill('[data-testid="companion-1-family-name"]', 'PÃ©rez');                                                                                                                                                                                      â”‚
â”‚   await page.click('[data-testid="continue-step-2"]');                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 8. Wizard Step 3: Review and select payment type                                                                                                                                                                                                       â”‚
â”‚   await page.click('[data-testid="payment-type-contado"]');                                                                                                                                                                                                 â”‚
â”‚   await page.check('[data-testid="accept-terms"]');                                                                                                                                                                                                         â”‚
â”‚   await page.click('[data-testid="confirm-payment-btn"]');                                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // 9. Wizard Step 4: Redirect to MIT payment                                                                                                                                                                                                              â”‚
â”‚   await page.waitForURL(/mitpaymentgateway\.com/);                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚   // Verify reservation was created                                                                                                                                                                                                                         â”‚
â”‚   // Verify payment plan was generated                                                                                                                                                                                                                      â”‚
â”‚ });                                                                                                                                                                                                                                                         â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ“… Timeline Estimado                                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Semana 1: Core Components (5-6 dÃ­as)                                                                                                                                                                                                                    â”‚
â”‚ - **DÃ­a 1-2**: SeasonCard + RoomTypeSelector                                                                                                                                                                                                                â”‚
â”‚ - **DÃ­a 3-4**: CompanionDetailsForm + ExtraServicesSelector                                                                                                                                                                                                 â”‚
â”‚ - **DÃ­a 5-6**: ItineraryCard + PaymentPlanSummary (verificar/refactor)                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Semana 2: Product Detail Page (5-6 dÃ­as)                                                                                                                                                                                                                â”‚
â”‚ - **DÃ­a 1-2**: Estructura de pÃ¡gina + integraciÃ³n de gallery                                                                                                                                                                                                â”‚
â”‚ - **DÃ­a 3-4**: IntegraciÃ³n de todas las secciones                                                                                                                                                                                                           â”‚
â”‚ - **DÃ­a 5-6**: Responsive design + polish                                                                                                                                                                                                                   â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Semana 3: Wizard Integration (4-5 dÃ­as)                                                                                                                                                                                                                 â”‚
â”‚ - **DÃ­a 1-2**: Integrar componentes nuevos en wizard                                                                                                                                                                                                        â”‚
â”‚ - **DÃ­a 3-4**: Testing de flujo completo                                                                                                                                                                                                                    â”‚
â”‚ - **DÃ­a 5**: Bug fixes + refinamiento                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Total**: 14-17 dÃ­as (con testing incluido)                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## âœ… Definition of Done                                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ Una tarea se considera completa cuando:                                                                                                                                                                                                                     â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 1. **CÃ³digo**:                                                                                                                                                                                                                                              â”‚
â”‚    - âœ… Componente implementado con TypeScript strict                                                                                                                                                                                                        â”‚
â”‚    - âœ… Props interface documentada                                                                                                                                                                                                                          â”‚
â”‚    - âœ… No errores de compilaciÃ³n                                                                                                                                                                                                                            â”‚
â”‚    - âœ… No `any` types innecesarios                                                                                                                                                                                                                          â”‚
â”‚    - âœ… CÃ³digo limpio (no console.log)                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 2. **Funcionalidad**:                                                                                                                                                                                                                                       â”‚
â”‚    - âœ… Funciona correctamente en desktop y mobile                                                                                                                                                                                                           â”‚
â”‚    - âœ… Validaciones implementadas (Zod schemas)                                                                                                                                                                                                             â”‚
â”‚    - âœ… Error handling completo                                                                                                                                                                                                                              â”‚
â”‚    - âœ… Loading states implementados                                                                                                                                                                                                                         â”‚
â”‚    - âœ… Accesibilidad bÃ¡sica (keyboard navigation, ARIA labels)                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 3. **IntegraciÃ³n**:                                                                                                                                                                                                                                         â”‚
â”‚    - âœ… Integrado con componentes existentes                                                                                                                                                                                                                 â”‚
â”‚    - âœ… Server Actions funcionando                                                                                                                                                                                                                           â”‚
â”‚    - âœ… GraphQL mutations exitosas                                                                                                                                                                                                                           â”‚
â”‚    - âœ… Estado persistente en localStorage (wizard)                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 4. **Testing**:                                                                                                                                                                                                                                             â”‚
â”‚    - âœ… Unit tests escritos y pasando                                                                                                                                                                                                                        â”‚
â”‚    - âœ… Integration tests exitosos                                                                                                                                                                                                                           â”‚
â”‚    - âœ… End-to-end test completo del flujo                                                                                                                                                                                                                   â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 5. **DocumentaciÃ³n**:                                                                                                                                                                                                                                       â”‚
â”‚    - âœ… Props documentadas con JSDoc                                                                                                                                                                                                                         â”‚
â”‚    - âœ… README actualizado si necesario                                                                                                                                                                                                                      â”‚
â”‚    - âœ… Ejemplos de uso incluidos                                                                                                                                                                                                                            â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ¨ Design System & UI Guidelines                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Colors                                                                                                                                                                                                                                                  â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // Primary gradient                                                                                                                                                                                                                                         â”‚
â”‚ bg-gradient-to-r from-pink-500 to-purple-600                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Success                                                                                                                                                                                                                                                  â”‚
â”‚ text-green-700 bg-green-50                                                                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Warning                                                                                                                                                                                                                                                  â”‚
â”‚ text-orange-700 bg-orange-50                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Error                                                                                                                                                                                                                                                    â”‚
â”‚ text-red-700 bg-red-50                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Neutral                                                                                                                                                                                                                                                  â”‚
â”‚ text-gray-900 bg-gray-50                                                                                                                                                                                                                                    â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Typography                                                                                                                                                                                                                                              â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // Headings                                                                                                                                                                                                                                                 â”‚
â”‚ h1: text-4xl font-bold                                                                                                                                                                                                                                      â”‚
â”‚ h2: text-2xl font-bold                                                                                                                                                                                                                                      â”‚
â”‚ h3: text-xl font-semibold                                                                                                                                                                                                                                   â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Body                                                                                                                                                                                                                                                     â”‚
â”‚ p: text-base leading-relaxed                                                                                                                                                                                                                                â”‚
â”‚ small: text-sm text-gray-600                                                                                                                                                                                                                                â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Spacing                                                                                                                                                                                                                                                 â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ // Sections                                                                                                                                                                                                                                                 â”‚
â”‚ space-y-12  // Between major sections                                                                                                                                                                                                                       â”‚
â”‚ space-y-6   // Between subsections                                                                                                                                                                                                                          â”‚
â”‚ space-y-3   // Between elements                                                                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ // Padding                                                                                                                                                                                                                                                  â”‚
â”‚ p-6   // Cards                                                                                                                                                                                                                                              â”‚
â”‚ p-4   // Mobile cards                                                                                                                                                                                                                                       â”‚
â”‚ px-8  // Buttons                                                                                                                                                                                                                                            â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Shadows                                                                                                                                                                                                                                                 â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ shadow-sm    // Light cards                                                                                                                                                                                                                                 â”‚
â”‚ shadow-lg    // Hover states                                                                                                                                                                                                                                â”‚
â”‚ shadow-2xl   // Sticky footer, important CTAs                                                                                                                                                                                                               â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Transitions                                                                                                                                                                                                                                             â”‚
â”‚ ```typescript                                                                                                                                                                                                                                               â”‚
â”‚ transition-all duration-300  // Smooth interactions                                                                                                                                                                                                         â”‚
â”‚ hover:scale-105             // Button hover                                                                                                                                                                                                                 â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸš€ Getting Started                                                                                                                                                                                                                                       â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Prerequisites                                                                                                                                                                                                                                           â”‚
â”‚ - Node.js 18+                                                                                                                                                                                                                                               â”‚
â”‚ - Yarn                                                                                                                                                                                                                                                      â”‚
â”‚ - AWS Amplify configurado                                                                                                                                                                                                                                   â”‚
â”‚ - AWS Location Service configurado                                                                                                                                                                                                                          â”‚
â”‚ - MIT Payment Gateway credentials                                                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ### Setup                                                                                                                                                                                                                                                   â”‚
â”‚ ```bash                                                                                                                                                                                                                                                     â”‚
â”‚ # 1. Install dependencies                                                                                                                                                                                                                                   â”‚
â”‚ yarn install                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ # 2. Verify environment variables                                                                                                                                                                                                                           â”‚
â”‚ cat .env.local | grep -E "(URL_ENCRYPTION_SECRET|MIT_WEBHOOK_SECRET|MIT_API_KEY|NEXT_PUBLIC_BASE_URL)"                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ # 3. Run codegen to ensure GraphQL types are up to date                                                                                                                                                                                                     â”‚
â”‚ yarn codegen                                                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ # 4. Start dev server                                                                                                                                                                                                                                       â”‚
â”‚ yarn dev                                                                                                                                                                                                                                                    â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ # 5. Navigate to marketplace                                                                                                                                                                                                                                â”‚
â”‚ open http://localhost:3000/marketplace                                                                                                                                                                                                                      â”‚
â”‚ ```                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ## ğŸ“ Next Steps                                                                                                                                                                                                                                            â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ 1. **Review this plan** with team for feedback                                                                                                                                                                                                              â”‚
â”‚ 2. **Create feature branch**: `git checkout -b feature/fase-0-booking-experience`                                                                                                                                                                           â”‚
â”‚ 3. **Start with SeasonCard** (highest priority, quickest win)                                                                                                                                                                                               â”‚
â”‚ 4. **Iterate incrementally** (1 component â†’ test â†’ commit)                                                                                                                                                                                                  â”‚
â”‚ 5. **Request code reviews** after each major component                                                                                                                                                                                                      â”‚
â”‚ 6. **Update this plan** as discoveries are made                                                                                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ ---                                                                                                                                                                                                                                                         â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Status**: âœ… **PLAN COMPLETO Y LISTO PARA IMPLEMENTACIÃ“N**                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â”‚ **Ãšltima actualizaciÃ³n**: 2025-10-31                                                                                                                                                                                                                        â”‚
â”‚ **Creado por**: Claude (Anthropic)                                                                                                                                                                                                                          â”‚
â”‚ **PrÃ³ximo paso**: Comenzar implementaciÃ³n de SeasonCard component                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                                             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
 Do you want to create FASE-0-PLAN-IMPLEMENTACION.md?
 â¯ 1. Yes
   2. Yes, allow all edits during this session (shift+tab)
   3. No, and tell Claude what to do differently (esc)

