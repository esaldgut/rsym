# codegen.advanced.yml
overwrite: true
schema: schemas/schema.graphql
documents: 
  - "src/graphql/**/*.graphql"
  - "src/graphql/**/*.gql"
generates:
  # Tipos principales
  src/generated/graphql.ts:
    plugins:
      - "typescript"
      - "typescript-operations"
    config:
      # Configuración de escalares AWS
      scalars:
        ID: string
        String: string
        Boolean: boolean
        Int: number
        Float: number
        AWSDate: string
        AWSTime: string
        AWSDateTime: string
        AWSTimestamp: number
        AWSEmail: string
        AWSJSON: string
        AWSURL: string
        AWSPhone: string
        AWSIPAddress: string
      
      # Configuración de tipos
      enumsAsTypes: true
      constEnums: true
      futureProofEnums: true
      maybeValue: T | null | undefined
      inputMaybeValue: T | null | undefined
      avoidOptionals: false
      nonOptionalTypename: true
      skipTypename: false
      
      # Configuración de nombres
      namingConvention:
        typeNames: PascalCase
        enumValues: UPPER_CASE
        fieldNames: camelCase
        variableNames: camelCase
        
      # Prefijos y sufijos
      typesPrefix: ""
      typesSuffix: ""
      enumPrefix: false
      enumSuffix: ""
      
      # Configuración de fragmentos
      exportFragmentSpreadSubTypes: true
      dedupeFragments: true
      preResolveTypes: true
      
      # Configuración de imports
      useIndexSignature: true
      immutableTypes: false
      
  # Hooks para Amplify
  src/generated/amplify-hooks.ts:
    plugins:
      - "typescript"
      - "typescript-operations"
      - add:
          content: |
            import { generateClient } from 'aws-amplify/api';
            import type { GraphQLQuery, GraphQLMutation, GraphQLSubscription } from '@aws-amplify/api';
            
            const client = generateClient();
    config:
      withHooks: true
      reactApolloVersion: 3
      
  # Tipos para formularios
  src/generated/form-types.ts:
    plugins:
      - "typescript"
    config:
      onlyOperationTypes: true
      exportFragmentSpreadSubTypes: true
      
  # Schema introspection
  src/generated/introspection.json:
    plugins:
      - "introspection"
    config:
      minify: true
